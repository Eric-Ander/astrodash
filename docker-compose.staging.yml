version: '3.8'

# Staging environment overrides
# Use with: docker compose -f docker-compose.yml -f docker-compose.staging.yml up -d

services:
  astroweather:
    container_name: astrodash-staging
    ports: !override
      - "3001:3000"  # Staging runs on port 3001 (override replaces base ports)
    environment:
      - NODE_ENV=staging
      - PORT=3000
      - DATABASE_PATH=/app/data/astrodash.db
      - ENABLE_DEBUG=true
    volumes:
      - ./backend/data/staging:/app/data  # Separate staging database
      - ./frontend/public:/app/frontend/public:ro
      - ./cards:/app/cards:ro
